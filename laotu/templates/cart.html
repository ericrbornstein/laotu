{% extends "layout.html" %}
{% block title %}购物车{% endblock %}

{% block header %}购物车{% endblock %}
{% block main %}
  <div style="width: 150px; position:relative; left: 250px; margin: 1rem auto;">
    <h1><a class="clear" href="{{ url_for('clear_cart')}}">Clear cart</a></h1>
  </div>

  <br><br>
  {% for item in items %}
    <div style="position: relative;
    width: 90%;
    max-width: 600px;
    height: 150px;
    left: -25px;
    border-radius: 15px;
    margin: 1rem auto;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    background-color: rgba(119,170,68,0.6);
    " onclick="gotoURL('{{ url_for('show_product', product_id=item.product_id)}}')">
    
      <div style="position: absolute;
      border-radius: 15px 0px 0px 15px;
      overflow: hidden;
      height: 150px;
      width: 30%;
      background:#fff;
      ">
        <span style="display:inline-block;vertical-align:center;"> </span>
        <img src="{{ url_for('static', filename='images/laotu-logo.png') }}" style="max-width:100%; max-height:100%; vertical-align:center;">
      </div>

      <div style="height: 100%; position:absolute; right:0; width: 68%;">
        <h1>{{ item.title }}</h1>
        <div style="position: absolute; bottom:10px; width: 100%">
          <h2>数量: {{item.quantity }} &emsp; 价钱: {{ item.price/100 }} &emsp; 你付: &#165 {{ item.price/100 * item.quantity }}</h2>
        </div>
      </div> 
    </div>

    <div style="position: relative; left: 10px">
      <button onclick="handleButtonClick('{{ url_for('remove_product', product_id=item.product_id)}}')" class="dropbtn">去掉</button>
      <div class="dropdown">
      <button onclick="dropDownQuantity()" class="dropbtn">Update Product</button>
      <div id="myDropdown" class="dropdown-content">
        <a href="{{ url_for('update_product', product_id=item.product_id, quantity=1)}}">1</a>
        <a href="{{ url_for('update_product', product_id=item.product_id, quantity=2)}}">2</a>
        <a href="{{ url_for('update_product', product_id=item.product_id, quantity=3)}}">3</a>
    		<a href="{{ url_for('update_product', product_id=item.product_id, quantity=4)}}">4</a>
    		<a href="{{ url_for('update_product', product_id=item.product_id, quantity=5)}}">5</a>
      </div>
    </div>
  </div>
  {% else %}
    <em>There's nothing in your cart.</em>
  {% endfor %}

  {% if items %}
  <div style="position: relative; left: 10px">
    <button onclick="handleButtonClick('{{ url_for('pay')}}')" class="dropbtn">
      <h1>Total Price: {{total}} CNY</h1>
      <h1>Pay For Items</h1>
    </button>
  </div>
  {% endif %}


{% endblock %}
